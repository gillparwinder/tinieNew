{"version":3,"names":["Toast","React","Component","constructor","props","context","prevProps","isDark","setState","prevState","styles","__styles","args","state","visible","_timeout","clearTimeout","_startAnimation","ACTION","CLOSE","_positionToast","Animated","Value","Promise","resolve","config","OPEN","autoClose","undefined","duration","ENV","AUTO_CLOSE","setTimeout","_close","onShow","onHide","action","timing","toValue","top","_cardHeight","useNativeDriver","start","type","title","textBody","onPress","onLongPress","titleStyle","titleCustomStyle","textBodyStyle","textBodyCustomStyle","nativeEvent","layout","height","StyleSheet","flatten","cardRow","transform","translateY","cardContainer","backendImage","getImage","image","overflow","flex","titleLabel","descLabel","_CardRender","cardHeight","SafeAreaInsetsContext","createRef","instance","current","_open","create","backgroundContainer","absoluteFillObject","backgroundColor","container","position","left","right","zIndex","flexDirection","borderRadius","paddingHorizontal","paddingTop","paddingBottom","marginHorizontal","marginBottom","Color","get","fontWeight","fontSize","color","alignSelf","width","aspectRatio","marginRight","ALERT_TYPE","SUCCESS","tintColor","DANGER","WARNING"],"sources":["Toast.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Animated, Image, Pressable, StyleProp, StyleSheet, Text, TextStyle, View } from 'react-native';\nimport { SafeAreaInsetsContext } from 'react-native-safe-area-context';\nimport ENV, { ACTION, ALERT_TYPE } from '../config/ENV';\nimport { getImage } from '../service';\nimport Color from '../service/color';\n\nexport type IConfig = {\n  type?: ALERT_TYPE;\n  // position?: TOAST_POSITION;\n  title?: string;\n  textBody?: string;\n  titleStyle?: StyleProp<TextStyle>;\n  textBodyStyle?: StyleProp<TextStyle>;\n  autoClose?: number | boolean;\n  onPress?: () => void;\n  onLongPress?: () => void;\n  onShow?: () => void;\n  onHide?: () => void;\n};\n\ntype IProps = {\n  isDark: boolean;\n  config?: Pick<IConfig, 'autoClose' | 'titleStyle' | 'textBodyStyle'>;\n};\n\ntype IState = {\n  styles: ReturnType<typeof __styles>;\n  cardHeight: number;\n  overlayClose?: boolean;\n  visible: boolean;\n  config?: IConfig;\n};\nclass Toast extends React.Component<IProps, IState> {\n  /**\n   * @type {React.Context<EdgeInsets | null>}\n   */\n  static contextType = SafeAreaInsetsContext;\n\n  /**\n   * @type {React.RefObject<Toast>}\n   */\n  public static instance: React.RefObject<Toast> = React.createRef();\n\n  /**\n   * @param {IConfig} args\n   */\n  public static show = (args: IConfig): void => {\n    Toast.instance.current?._open(args);\n  };\n\n  /**\n   *\n   */\n  public static hide = (): void => {\n    Toast.instance.current?._close();\n  };\n\n  /**\n   * @type {React.ContextType<typeof SafeAreaInsetsContext>}\n   */\n  //@ts-ignore\n  public context: React.ContextType<typeof SafeAreaInsetsContext>;\n\n  /**\n   * @type {Animated.Value}\n   * @private\n   */\n  private _positionToast: Animated.Value;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  private _cardHeight: number;\n\n  /**\n   * @type {NodeJS.Timeout}\n   * @private\n   */\n  private _timeout?: NodeJS.Timeout;\n\n  /**\n   * @param {IProps} props\n   * @param {React.ContextType<typeof SafeAreaInsetsContext>} context\n   */\n  constructor(props: IProps, context: React.ContextType<typeof SafeAreaInsetsContext>) {\n    super(props, context);\n    this._cardHeight = 0;\n    this._positionToast = new Animated.Value(-500);\n    this.state = {\n      styles: __styles(props.isDark),\n      visible: false,\n      cardHeight: 0,\n    };\n  }\n\n  /**\n   * @param {Readonly<IProps>} prevProps\n   */\n  public componentDidUpdate = (prevProps: Readonly<IProps>): void => {\n    if (prevProps.isDark !== this.props.isDark) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState((prevState) => ({\n        ...prevState,\n        styles: __styles(this.props.isDark),\n      }));\n    }\n  };\n\n  /**\n   * @param {IConfig} args\n   * @return {Promise<void>}\n   */\n  private _open = async (args: IConfig): Promise<void> => {\n    if (this.state.visible) {\n      if (this._timeout) {\n        clearTimeout(this._timeout);\n      }\n      await this._startAnimation(ACTION.CLOSE);\n    }\n    this._positionToast = new Animated.Value(-500);\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, visible: true, config: args }), resolve));\n    await this._startAnimation(ACTION.OPEN);\n\n    const autoClose = this.state.config?.autoClose !== undefined ? this.state.config?.autoClose : this.props.config?.autoClose;\n    if (autoClose || autoClose === undefined) {\n      const duration = typeof autoClose === 'number' ? autoClose : ENV.AUTO_CLOSE;\n      this._timeout = setTimeout(() => this._close(), duration);\n    }\n    this.state.config?.onShow?.();\n  };\n\n  /**\n   * @return {Promise<void>}\n   */\n  private _close = async (): Promise<void> => {\n    await this._startAnimation(ACTION.CLOSE);\n    const onHide = this.state.config?.onShow;\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, visible: false, config: undefined }), resolve));\n    onHide?.();\n  };\n\n  /**\n   * @param {ACTION} action\n   * @return {Promise<void>}\n   */\n  private _startAnimation = (action: ACTION): Promise<void> => {\n    return new Promise((resolve) => {\n      Animated.timing(this._positionToast, {\n        toValue: action === ACTION.OPEN ? this.context?.top ?? 0 : -this._cardHeight,\n        duration: 250,\n        useNativeDriver: true,\n      }).start(() => resolve());\n    });\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  private _CardRender = (): JSX.Element => {\n    const { styles } = this.state;\n    const { config } = this.props;\n\n    if (this.state.config) {\n      const { type, title, textBody, onPress, onLongPress, titleStyle: titleCustomStyle, textBodyStyle: textBodyCustomStyle } = this.state.config;\n\n      const titleStyle = titleCustomStyle || config?.titleStyle;\n      const textBodyStyle = textBodyCustomStyle || config?.textBodyStyle;\n      return (\n        <Animated.View\n          onLayout={({\n            nativeEvent: {\n              layout: { height },\n            },\n          }) => (this._cardHeight = height)}\n          style={StyleSheet.flatten([styles.cardRow, { transform: [{ translateY: this._positionToast }] }])}\n        >\n          <Pressable style={styles.cardContainer} onPress={onPress} onLongPress={onLongPress}>\n            {type && (\n              <>\n                <View style={styles.backendImage} />\n                <Image source={getImage(type)} resizeMode=\"contain\" style={StyleSheet.flatten([styles.image, styles[`${type}Image`]])} />\n              </>\n            )}\n            {/* eslint-disable-next-line react-native/no-inline-styles */}\n            <View style={{ overflow: 'hidden', flex: 1 }}>\n              {title && <Text style={StyleSheet.flatten([styles.titleLabel, titleStyle])}>{title}</Text>}\n              {textBody && <Text style={StyleSheet.flatten([styles.descLabel, textBodyStyle])}>{textBody}</Text>}\n            </View>\n          </Pressable>\n        </Animated.View>\n      );\n    }\n    return <></>;\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  public render = (): JSX.Element => {\n    const { visible } = this.state;\n    const { _CardRender } = this;\n    if (!visible) {\n      return <></>;\n    }\n    return <_CardRender />;\n  };\n}\n\nconst __styles = (isDark: boolean) =>\n  StyleSheet.create({\n    backgroundContainer: {\n      ...StyleSheet.absoluteFillObject,\n      backgroundColor: '#00000070',\n    },\n\n    container: {\n      position: 'absolute',\n      backgroundColor: '#00000030',\n      top: 0,\n      left: 0,\n      right: 0,\n    },\n\n    cardRow: {\n      zIndex: 9999,\n      position: 'absolute',\n      left: 0,\n      right: 0,\n    },\n\n    cardContainer: {\n      flexDirection: 'row',\n      borderRadius: 12,\n      paddingHorizontal: 12,\n      paddingTop: 12,\n      paddingBottom: 12,\n      marginHorizontal: 12,\n      marginBottom: 12,\n      backgroundColor: Color.get('card', isDark),\n    },\n\n    titleLabel: {\n      fontWeight: 'bold',\n      fontSize: 18,\n      color: Color.get('label', isDark),\n    },\n    descLabel: {\n      color: Color.get('label', isDark),\n    },\n    backendImage: {\n      position: 'absolute',\n      alignSelf: 'center',\n      height: 12,\n      width: 12,\n      backgroundColor: '#FBFBFB',\n      borderRadius: 100,\n      left: 12 + 7,\n    },\n    image: {\n      alignSelf: 'center',\n      width: 25,\n      aspectRatio: 1,\n      marginRight: 12,\n    },\n\n    [`${ALERT_TYPE.SUCCESS}Image`]: {\n      tintColor: Color.get('success', isDark),\n    },\n    [`${ALERT_TYPE.DANGER}Image`]: {\n      tintColor: Color.get('danger', isDark),\n    },\n    [`${ALERT_TYPE.WARNING}Image`]: {\n      tintColor: Color.get('warning', isDark),\n    },\n  });\n\nexport default Toast;\n"],"mappings":"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"}