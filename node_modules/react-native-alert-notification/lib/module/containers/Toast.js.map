{"version":3,"names":["React","Animated","Image","Pressable","StyleSheet","Text","View","SafeAreaInsetsContext","ENV","ACTION","ALERT_TYPE","getImage","Color","Toast","Component","constructor","props","context","prevProps","isDark","setState","prevState","styles","__styles","args","state","visible","_timeout","clearTimeout","_startAnimation","CLOSE","_positionToast","Value","Promise","resolve","config","OPEN","autoClose","undefined","duration","AUTO_CLOSE","setTimeout","_close","onShow","onHide","action","timing","toValue","top","_cardHeight","useNativeDriver","start","type","title","textBody","onPress","onLongPress","titleStyle","titleCustomStyle","textBodyStyle","textBodyCustomStyle","nativeEvent","layout","height","flatten","cardRow","transform","translateY","cardContainer","backendImage","image","overflow","flex","titleLabel","descLabel","_CardRender","cardHeight","createRef","instance","current","_open","create","backgroundContainer","absoluteFillObject","backgroundColor","container","position","left","right","zIndex","flexDirection","borderRadius","paddingHorizontal","paddingTop","paddingBottom","marginHorizontal","marginBottom","get","fontWeight","fontSize","color","alignSelf","width","aspectRatio","marginRight","SUCCESS","tintColor","DANGER","WARNING"],"sources":["Toast.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Animated, Image, Pressable, StyleProp, StyleSheet, Text, TextStyle, View } from 'react-native';\nimport { SafeAreaInsetsContext } from 'react-native-safe-area-context';\nimport ENV, { ACTION, ALERT_TYPE } from '../config/ENV';\nimport { getImage } from '../service';\nimport Color from '../service/color';\n\nexport type IConfig = {\n  type?: ALERT_TYPE;\n  // position?: TOAST_POSITION;\n  title?: string;\n  textBody?: string;\n  titleStyle?: StyleProp<TextStyle>;\n  textBodyStyle?: StyleProp<TextStyle>;\n  autoClose?: number | boolean;\n  onPress?: () => void;\n  onLongPress?: () => void;\n  onShow?: () => void;\n  onHide?: () => void;\n};\n\ntype IProps = {\n  isDark: boolean;\n  config?: Pick<IConfig, 'autoClose' | 'titleStyle' | 'textBodyStyle'>;\n};\n\ntype IState = {\n  styles: ReturnType<typeof __styles>;\n  cardHeight: number;\n  overlayClose?: boolean;\n  visible: boolean;\n  config?: IConfig;\n};\nclass Toast extends React.Component<IProps, IState> {\n  /**\n   * @type {React.Context<EdgeInsets | null>}\n   */\n  static contextType = SafeAreaInsetsContext;\n\n  /**\n   * @type {React.RefObject<Toast>}\n   */\n  public static instance: React.RefObject<Toast> = React.createRef();\n\n  /**\n   * @param {IConfig} args\n   */\n  public static show = (args: IConfig): void => {\n    Toast.instance.current?._open(args);\n  };\n\n  /**\n   *\n   */\n  public static hide = (): void => {\n    Toast.instance.current?._close();\n  };\n\n  /**\n   * @type {React.ContextType<typeof SafeAreaInsetsContext>}\n   */\n  //@ts-ignore\n  public context: React.ContextType<typeof SafeAreaInsetsContext>;\n\n  /**\n   * @type {Animated.Value}\n   * @private\n   */\n  private _positionToast: Animated.Value;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  private _cardHeight: number;\n\n  /**\n   * @type {NodeJS.Timeout}\n   * @private\n   */\n  private _timeout?: NodeJS.Timeout;\n\n  /**\n   * @param {IProps} props\n   * @param {React.ContextType<typeof SafeAreaInsetsContext>} context\n   */\n  constructor(props: IProps, context: React.ContextType<typeof SafeAreaInsetsContext>) {\n    super(props, context);\n    this._cardHeight = 0;\n    this._positionToast = new Animated.Value(-500);\n    this.state = {\n      styles: __styles(props.isDark),\n      visible: false,\n      cardHeight: 0,\n    };\n  }\n\n  /**\n   * @param {Readonly<IProps>} prevProps\n   */\n  public componentDidUpdate = (prevProps: Readonly<IProps>): void => {\n    if (prevProps.isDark !== this.props.isDark) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState((prevState) => ({\n        ...prevState,\n        styles: __styles(this.props.isDark),\n      }));\n    }\n  };\n\n  /**\n   * @param {IConfig} args\n   * @return {Promise<void>}\n   */\n  private _open = async (args: IConfig): Promise<void> => {\n    if (this.state.visible) {\n      if (this._timeout) {\n        clearTimeout(this._timeout);\n      }\n      await this._startAnimation(ACTION.CLOSE);\n    }\n    this._positionToast = new Animated.Value(-500);\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, visible: true, config: args }), resolve));\n    await this._startAnimation(ACTION.OPEN);\n\n    const autoClose = this.state.config?.autoClose !== undefined ? this.state.config?.autoClose : this.props.config?.autoClose;\n    if (autoClose || autoClose === undefined) {\n      const duration = typeof autoClose === 'number' ? autoClose : ENV.AUTO_CLOSE;\n      this._timeout = setTimeout(() => this._close(), duration);\n    }\n    this.state.config?.onShow?.();\n  };\n\n  /**\n   * @return {Promise<void>}\n   */\n  private _close = async (): Promise<void> => {\n    await this._startAnimation(ACTION.CLOSE);\n    const onHide = this.state.config?.onShow;\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, visible: false, config: undefined }), resolve));\n    onHide?.();\n  };\n\n  /**\n   * @param {ACTION} action\n   * @return {Promise<void>}\n   */\n  private _startAnimation = (action: ACTION): Promise<void> => {\n    return new Promise((resolve) => {\n      Animated.timing(this._positionToast, {\n        toValue: action === ACTION.OPEN ? this.context?.top ?? 0 : -this._cardHeight,\n        duration: 250,\n        useNativeDriver: true,\n      }).start(() => resolve());\n    });\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  private _CardRender = (): JSX.Element => {\n    const { styles } = this.state;\n    const { config } = this.props;\n\n    if (this.state.config) {\n      const { type, title, textBody, onPress, onLongPress, titleStyle: titleCustomStyle, textBodyStyle: textBodyCustomStyle } = this.state.config;\n\n      const titleStyle = titleCustomStyle || config?.titleStyle;\n      const textBodyStyle = textBodyCustomStyle || config?.textBodyStyle;\n      return (\n        <Animated.View\n          onLayout={({\n            nativeEvent: {\n              layout: { height },\n            },\n          }) => (this._cardHeight = height)}\n          style={StyleSheet.flatten([styles.cardRow, { transform: [{ translateY: this._positionToast }] }])}\n        >\n          <Pressable style={styles.cardContainer} onPress={onPress} onLongPress={onLongPress}>\n            {type && (\n              <>\n                <View style={styles.backendImage} />\n                <Image source={getImage(type)} resizeMode=\"contain\" style={StyleSheet.flatten([styles.image, styles[`${type}Image`]])} />\n              </>\n            )}\n            {/* eslint-disable-next-line react-native/no-inline-styles */}\n            <View style={{ overflow: 'hidden', flex: 1 }}>\n              {title && <Text style={StyleSheet.flatten([styles.titleLabel, titleStyle])}>{title}</Text>}\n              {textBody && <Text style={StyleSheet.flatten([styles.descLabel, textBodyStyle])}>{textBody}</Text>}\n            </View>\n          </Pressable>\n        </Animated.View>\n      );\n    }\n    return <></>;\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  public render = (): JSX.Element => {\n    const { visible } = this.state;\n    const { _CardRender } = this;\n    if (!visible) {\n      return <></>;\n    }\n    return <_CardRender />;\n  };\n}\n\nconst __styles = (isDark: boolean) =>\n  StyleSheet.create({\n    backgroundContainer: {\n      ...StyleSheet.absoluteFillObject,\n      backgroundColor: '#00000070',\n    },\n\n    container: {\n      position: 'absolute',\n      backgroundColor: '#00000030',\n      top: 0,\n      left: 0,\n      right: 0,\n    },\n\n    cardRow: {\n      zIndex: 9999,\n      position: 'absolute',\n      left: 0,\n      right: 0,\n    },\n\n    cardContainer: {\n      flexDirection: 'row',\n      borderRadius: 12,\n      paddingHorizontal: 12,\n      paddingTop: 12,\n      paddingBottom: 12,\n      marginHorizontal: 12,\n      marginBottom: 12,\n      backgroundColor: Color.get('card', isDark),\n    },\n\n    titleLabel: {\n      fontWeight: 'bold',\n      fontSize: 18,\n      color: Color.get('label', isDark),\n    },\n    descLabel: {\n      color: Color.get('label', isDark),\n    },\n    backendImage: {\n      position: 'absolute',\n      alignSelf: 'center',\n      height: 12,\n      width: 12,\n      backgroundColor: '#FBFBFB',\n      borderRadius: 100,\n      left: 12 + 7,\n    },\n    image: {\n      alignSelf: 'center',\n      width: 25,\n      aspectRatio: 1,\n      marginRight: 12,\n    },\n\n    [`${ALERT_TYPE.SUCCESS}Image`]: {\n      tintColor: Color.get('success', isDark),\n    },\n    [`${ALERT_TYPE.DANGER}Image`]: {\n      tintColor: Color.get('danger', isDark),\n    },\n    [`${ALERT_TYPE.WARNING}Image`]: {\n      tintColor: Color.get('warning', isDark),\n    },\n  });\n\nexport default Toast;\n"],"mappings":"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"}